# claude-plugins

Claude Code用のカスタムプラグインリポジトリ。

## プラグイン新設時

- README.mdにプラグインの説明とインストールコマンドを追加すること
- `.claude-plugin/plugin.json` にバージョン情報を含めること
- `.claude-plugin/marketplace.json` の `plugins` 配列にエントリを追加すること
- スクリプトを含むプラグインは、実際にコマンドを実行して動作確認すること（サーバー起動・主要コマンドの実行など）

## 設計大本線: code execution with MCP

このプロジェクトのツール実行における根幹方針。MCPが提供するツールは、**runnerサブエージェント経由のコード実行（code execution with MCP）** として利用する。メインコンテキストからMCPツールを直接呼び出す「MCPツール呼び出し」とは区別する。

| 方式 | 主体 | メインコンテキスト影響 | 採用 |
|------|------|----------------------|------|
| MCPツール直接呼び出し | メインコンテキスト | 大（ツール結果が流入） | ❌ 禁止 |
| code execution with MCP | runnerサブエージェント | 小（要約のみ受け取る） | ✅ 推奨 |
| Bash + スクリプト | runnerサブエージェント | 小（要約のみ受け取る） | ✅ 推奨 |

- **スキル**: MCP経由ツールの呼び出し手順・パラメータをリファレンスとして記載
- **runner**: `tools: Bash` を基本とし、スキルをプリロードしてコード実行を担う
- **メインコンテキスト**: runnerに委任し、結果の要約のみを受け取る

## 必須: `{plugin}/` 配下を変更したらバージョン更新

`{plugin}/` 配下のファイルを追加・変更・削除する作業には、以下のバージョン更新が含まれる。ファイル変更とバージョン更新は一体であり、バージョン更新なしにプラグインの変更は完了しない。

1. `{plugin}/.claude-plugin/plugin.json` の `version` を更新
2. `.claude-plugin/marketplace.json` の同プラグインの `version` を同期

バージョン判断: 機能追加→マイナー、修正→パッチ、破壊的変更→メジャー
